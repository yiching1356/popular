<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš¡ å³æ™‚äººæ°£ç‹æŠ•ç¥¨ç«™</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --leader-gradient: linear-gradient(90deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            --bg-color: #f0f2f5;
        }

        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--bg-color); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        .vote-card { width: 90%; max-width: 450px; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: #333; margin-bottom: 10px; font-size: 24px; }
        .subtitle { text-align: center; color: #666; font-size: 14px; margin-bottom: 30px; }

        .candidate-item { margin-bottom: 25px; }

        .candidate-info { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 8px; }
        .name { font-weight: bold; font-size: 18px; color: #444; }
        .votes { font-size: 14px; color: #888; }
        .vote-count { font-weight: 800; color: #764ba2; font-size: 20px; }

        /* é€²åº¦æ¢å®¹å™¨ */
        .progress-container {
            height: 12px; background: #e0e0e0; border-radius: 6px; overflow: hidden; position: relative;
        }

        /* å‹•æ…‹é€²åº¦æ¢ */
        .progress-bar {
            height: 100%;
            width: 0%;
            background: #ccc;
            border-radius: 6px;
            transition: width 0.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .is-leader-bar {
            background: var(--primary-gradient);
            box-shadow: 0 0 10px rgba(118, 75, 162, 0.3);
        }

        .vote-btn {
            width: 100%; padding: 12px; margin-top: 10px; border: none; border-radius: 8px;
            background: #333; color: white; font-weight: bold; cursor: pointer; transition: 0.3s;
        }

        .vote-btn:hover:not(:disabled) { background: #000; transform: translateY(-2px); }
        .vote-btn:disabled { background: #ccc; cursor: not-allowed; }

        .voted-msg {
            text-align: center; color: #e53e3e; font-size: 14px; margin-top: 15px; font-weight: bold;
        }

        /* çæ¯å‹•ç•« */
        .crown { margin-right: 5px; }
    </style>
</head>
<body>

<div id="app" class="vote-card">
    <h1>ğŸ† äººæ°£ç‹å¤§è³½</h1>
    <p class="subtitle">å³æ™‚æˆ°æ³ï¼šèª°æ‰æ˜¯æœ€å¾Œçš„è´å®¶ï¼Ÿ</p>

    <div v-for="p in players" :key="p.id" class="candidate-item">
        <div class="candidate-info">
            <span class="name">
                <span v-if="isLeader(p.votes)" class="crown">ğŸ‘‘</span>{{ p.name }}
            </span>
            <span class="votes">
                <span class="vote-count">{{ p.votes }}</span> ç¥¨ ({{ getPercent(p.votes) }}%)
            </span>
        </div>
        <div class="progress-container">
            <div class="progress-bar" 
                 :class="{'is-leader-bar': isLeader(p.votes)}"
                 :style="{ width: getPercent(p.votes) + '%' }">
            </div>
        </div>
        <button class="vote-btn" :disabled="hasVoted" @click="handleVote(p.id)">
            {{ hasVoted ? 'æ„Ÿè¬æŠ•ç¥¨' : 'æŠ•çµ¦ä»–' }}
        </button>
    </div>

    <div v-if="hasVoted" class="voted-msg">
        âš ï¸ ç³»çµ±åµæ¸¬åˆ°æ‚¨å·²å®ŒæˆæŠ•ç¥¨ï¼Œæ¯äººé™æŠ•ä¸€ç¥¨ã€‚
    </div>
</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                hasVoted: false,
                // é€™è£¡çš„åˆå§‹æ•¸æ“šå¯ä»¥éš¨æ„ä¿®æ”¹
                players: [
                    { id: 1, name: 'è‰¾ç‘çµ² Iris', votes: 42 },
                    { id: 2, name: 'é‡Œæ˜‚ Leon', votes: 38 },
                    { id: 3, name: 'å¨œå¨œ Nana', votes: 45 }
                ]
            }
        },
        mounted() {
            // æª¢æŸ¥æœ¬åœ°å­˜å„²
            if (localStorage.getItem('user_voted')) {
                this.hasVoted = true;
            }
            // è®€å–ä¹‹å‰çš„æ¨¡æ“¬ç¥¨æ•¸ (ç´”å‰ç«¯Demoç”¨)
            const savedVotes = localStorage.getItem('mock_votes');
            if (savedVotes) {
                this.players = JSON.parse(savedVotes);
            }
        },
        computed: {
            totalVotes() {
                return this.players.reduce((sum, p) => sum + p.votes, 0);
            },
            maxVote() {
                return Math.max(...this.players.map(p => p.votes));
            }
        },
        methods: {
            getPercent(votes) {
                if (this.totalVotes === 0) return 0;
                return ((votes / this.totalVotes) * 100).toFixed(1);
            },
            isLeader(votes) {
                return votes === this.maxVote && votes > 0;
            },
            handleVote(id) {
                if (this.hasVoted) return;

                const target = this.players.find(p => p.id === id);
                if (target) {
                    target.votes++;
                    this.hasVoted = true;
                    // ç´€éŒ„åˆ°ç€è¦½å™¨ä¸­
                    localStorage.setItem('user_voted', 'true');
                    localStorage.setItem('mock_votes', JSON.stringify(this.players));
                }
            }
        }
    }).mount('#app');
</script>

</body>
</html>
</body>
</html>
