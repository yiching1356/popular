<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®œæ…¶åœ°æ”¿äººæ°£ç‹æŠ•ç¥¨</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --yiqing-blue: #1e3a8a;
            --yiqing-gold: #f59e0b;
            --bg-soft: #f1f5f9;
        }

        body { font-family: "PingFang TC", "Heiti TC", "Microsoft JhengHei", sans-serif; background: var(--bg-soft); margin: 0; padding: 20px; display: flex; justify-content: center; }
        
        .vote-card { width: 100%; max-width: 600px; background: white; padding: 30px; border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        .header { text-align: center; margin-bottom: 25px; }
        h1 { color: var(--yiqing-blue); margin: 0; font-size: 28px; letter-spacing: 1px; }
        .divider { height: 4px; width: 60px; background: var(--yiqing-gold); margin: 15px auto; border-radius: 2px; }

        .candidate-list { display: flex; flex-direction: column; gap: 15px; }
        .candidate-item { 
            background: #fff; border: 2px solid #e2e8f0; padding: 16px; border-radius: 16px; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        
        .candidate-item.is-leading { border-color: var(--yiqing-gold); background: #fffcf0; transform: scale(1.02); }

        .candidate-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .name { font-weight: bold; font-size: 18px; color: #1e293b; display: flex; align-items: center; }
        .vote-stats { text-align: right; font-weight: 800; color: var(--yiqing-blue); }

        /* é€²åº¦æ¢æ§½ */
        .progress-track { height: 14px; background: #f1f5f9; border-radius: 7px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { 
            height: 100%; width: 0%; background: #94a3b8; border-radius: 7px; 
            transition: width 1.2s ease-out; 
        }
        .leader-fill { background: linear-gradient(90deg, #f59e0b, #fbbf24); box-shadow: 0 0 10px rgba(245, 158, 11, 0.4); }
        
        .vote-btn {
            width: 100%; padding: 12px; border: none; border-radius: 10px;
            background: var(--yiqing-blue); color: white; font-weight: bold; font-size: 16px;
            cursor: pointer; transition: 0.3s;
        }
        .vote-btn:hover:not(:disabled) { background: #1e40af; box-shadow: 0 4px 12px rgba(30, 58, 138, 0.2); }
        .vote-btn:disabled { background: #cbd5e1; cursor: not-allowed; }

        .footer { text-align: center; margin-top: 25px; padding-top: 20px; border-top: 1px solid #f1f5f9; }
        .alert-box { color: #b91c1c; background: #fee2e2; padding: 12px; border-radius: 10px; font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

<div id="app" class="vote-card">
    <div class="header">
        <h1>ğŸ† å®œæ…¶åœ°æ”¿äººæ°£ç‹</h1>
        <div class="divider"></div>
        <p style="color: #64748b;">æ”¯æŒä½ å¿ƒç›®ä¸­çš„å„ªç§€å–®ä½ï¼</p>
    </div>

    <div class="candidate-list">
        <div v-for="p in players" :key="p.id" class="candidate-item" :class="{'is-leading': isLeader(p.votes)}">
            <div class="candidate-info">
                <span class="name">
                    <span v-if="isLeader(p.votes)" style="margin-right: 8px;">ğŸ‘‘</span>
                    {{ p.name }}
                </span>
                <div class="vote-stats">
                    <span>{{ p.votes }} ç¥¨</span>
                    <small style="color:#94a3b8; margin-left:8px;">{{ getPercent(p.votes) }}%</small>
                </div>
            </div>
            <div class="progress-track">
                <div class="progress-fill" 
                     :class="{'leader-fill': isLeader(p.votes)}"
                     :style="{ width: getPercent(p.votes) + '%' }">
                </div>
            </div>
            <button class="vote-btn" :disabled="hasVoted" @click="handleVote(p.id)">
                {{ hasVoted ? 'å·²å®ŒæˆæŠ•ç¥¨' : 'æŠ•çµ¦æ­¤å–®ä½' }}
            </button>
        </div>
    </div>

    <div class="footer">
        <div v-if="hasVoted" class="alert-box">
            æ‚¨ä»Šæ—¥å·²å®ŒæˆæŠ•ç¥¨ï¼Œæ„Ÿè¬æ‚¨çš„åƒèˆ‡ï¼
        </div>
        <div style="font-size: 14px; color: #94a3b8;">
            ç¸½ç¥¨æ•¸ï¼š<strong style="color: #475569;">{{ totalVotes }}</strong>
        </div>
    </div>
</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                hasVoted: false,
                players: [
                    { id: 1, name: 'è¯å¹³æ‰€ âœ¦ ç‘œèæ‰€é•·', votes: 0 },
                    { id: 2, name: 'å®‰å¹³æ‰€ âœ¦ ç§€å¦‚æ‰€é•·', votes: 0 },
                    { id: 3, name: 'å»ºè¨­éƒ¨', votes: 0 },
                    { id: 4, name: 'ç¸½æ‰€ âœ¦ ç…’æ¾‚çµ„(K01)', votes: 0 },
                    { id: 5, name: 'ç¸½æ‰€ âœ¦ ä½©å©·çµ„(P01)', votes: 0 },
                    { id: 6, name: 'æ°¸åº·æ‰€ âœ¦ å­ç³æ‰€é•·', votes: 0 },
                    { id: 7, name: 'æ©‹é ­æ‰€ âœ¦ æƒ å©·æ‰€é•·', votes: 0 },
                    { id: 8, name: 'å–„åŒ–æ‰€ âœ¦ ææ•æ‰€é•·', votes: 0 },
                    { id: 9, name: 'å˜‰ç¾©æ‰€ âœ¦ ç¾ä¼¶æ‰€é•·', votes: 0 }
                ]
            }
        },
        mounted() {
            if (localStorage.getItem('yiqing_voted_status')) {
                this.hasVoted = true;
            }
            // è®€å–æœ¬åœ°æ¨¡æ“¬ç¥¨æ•¸
            const savedData = localStorage.getItem('yiqing_live_data');
            if (savedData) {
                this.players = JSON.parse(savedData);
            }
        },
        computed: {
            totalVotes() {
                return this.players.reduce((sum, p) => sum + p.votes, 0);
            },
            maxVote() {
                const votes = this.players.map(p => p.votes);
                return Math.max(...votes);
            }
        },
        methods: {
            getPercent(votes) {
                if (this.totalVotes === 0) return 0;
                return ((votes / this.totalVotes) * 100).toFixed(1);
            },
            isLeader(votes) {
                return votes === this.maxVote && votes > 0;
            },
            handleVote(id) {
                if (this.hasVoted) return;
                const target = this.players.find(p => p.id === id);
                if (target) {
                    target.votes++;
                    this.hasVoted = true;
                    localStorage.setItem('yiqing_voted_status', 'true');
                    localStorage.setItem('yiqing_live_data', JSON.stringify(this.players));
                }
            }
        }
    }).mount('#app');
</script>

</body>
</html>
